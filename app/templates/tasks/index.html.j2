{% extends 'dashboard.html.j2' %}

{% block content %}
<h1>{{ title }}</h1>
<hr>
<a class="uk-button uk-button-primary" href="{{ url_for('task.create_task') }}">Add Task</a>
{%  if tasks %}
{% for message in get_flashed_messages() %}
<div class="uk-alert-primary" uk-alert>
    <a class="uk-alert-close" uk-close></a>
    <p>{{ message }}</p>
</div>
{% endfor %}
<div class='uk-child-width-1-3@m uk-margin uk-grid-small' uk-grid>
    <div>
        <div class='uk-placeholder uk-padding-small'>
        <div class='uk-label uk-label-warning'>Pending</div>
            {% for task in tasks if task.status.name == "pending" %}
            <hr>
            <div class="uk-tile uk-tile-muted uk-padding-small">
                <div class="uk-clearfix">
                    <div class="uk-float-left">
                        <p class='uk-h4'>{{ task.title }}</p>
                    </div>
                    <div class="uk-float-right">
                        <a href="{{ url_for('task.update_task', id=task.id) }}" class="uk-icon-button" uk-icon="file-edit"></a>
                    </div>
                </div>
                <hr>

                <p class='uk-text-truncate'>{{ task.description }}</p>
                <a href="{{ url_for('task.read_task', id=task.id) }}" class="uk-button uk-button-text">
                    read more
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
    <div>
        <div class='uk-placeholder'>
            <div class='uk-label uk-badge'>Active</div>
            {% for task in tasks if task.status.name == "active" %}
            <hr>
            <div class="uk-tile uk-tile-muted uk-padding-small">
                <div class="uk-clearfix">
                    <div class="uk-float-left">
                        <p class='uk-h4'>{{ task.title }}</p>
                    </div>
                    <div class="uk-float-right">
                        <a href="{{ url_for('task.update_task', id=task.id) }}" class="uk-icon-button" uk-icon="file-edit"></a>
                    </div>
                </div>
                <hr>

                <p class='uk-text-truncate'>{{ task.description }}</p>
                <a href="{{ url_for('task.read_task', id=task.id) }}" class="uk-button uk-button-text">
                    read more
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
    <div>
        <div class='uk-placeholder'>
            <div class='uk-label uk-label-success'>Closed</div>
            {% for task in tasks if task.status.name == "closed" %}
            <hr>
            <div class="uk-tile uk-tile-muted uk-padding-small">
                <div class="uk-clearfix">
                    <div class="uk-float-left">
                        <p class='uk-h4'>{{ task.title }}</p>
                    </div>
                    <div class="uk-float-right">
                        <a href="{{ url_for('task.update_task', id=task.id) }}" class="uk-icon-button" uk-icon="file-edit"></a>
                    </div>
                </div>
                <hr>

                <p class='uk-text-truncate'>{{ task.description }}</p>
                <a href="{{ url_for('task.read_task', id=task.id) }}" class="uk-button uk-button-text">
                    read more
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% else %}
<div class="uk-placeholder uk-text-center">You have no tasks at the moment</div>
{% endif %}
{% endblock %}
